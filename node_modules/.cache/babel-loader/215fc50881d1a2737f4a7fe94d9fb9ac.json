{"ast":null,"code":"var AWS = require('../core');\n\nAWS.util.update(AWS.EC2.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.removeListener('extractError', AWS.EventListeners.Query.EXTRACT_ERROR);\n    request.addListener('extractError', this.extractError);\n\n    if (request.operation === 'copySnapshot') {\n      request.onAsync('validate', this.buildCopySnapshotPresignedUrl);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  buildCopySnapshotPresignedUrl: function buildCopySnapshotPresignedUrl(req, done) {\n    if (req.params.PresignedUrl || req._subRequest) {\n      return done();\n    }\n\n    req.params = AWS.util.copy(req.params);\n    req.params.DestinationRegion = req.service.config.region;\n    var config = AWS.util.copy(req.service.config);\n    delete config.endpoint;\n    config.region = req.params.SourceRegion;\n    var svc = new req.service.constructor(config);\n    var newReq = svc[req.operation](req.params);\n    newReq._subRequest = true;\n    newReq.presign(function (err, url) {\n      if (err) done(err);else {\n        req.params.PresignedUrl = url;\n        done();\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    // EC2 nests the error code and message deeper than other AWS Query services.\n    var httpResponse = resp.httpResponse;\n    var data = new AWS.XML.Parser().parse(httpResponse.body.toString() || '');\n\n    if (data.Errors) {\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Errors.Error.Code,\n        message: data.Errors.Error.Message\n      });\n    } else {\n      resp.error = AWS.util.error(new Error(), {\n        code: httpResponse.statusCode,\n        message: null\n      });\n    }\n\n    resp.error.requestId = data.RequestID || null;\n  }\n});","map":{"version":3,"names":["AWS","require","util","update","EC2","prototype","setupRequestListeners","request","removeListener","EventListeners","Query","EXTRACT_ERROR","addListener","extractError","operation","onAsync","buildCopySnapshotPresignedUrl","req","done","params","PresignedUrl","_subRequest","copy","DestinationRegion","service","config","region","endpoint","SourceRegion","svc","constructor","newReq","presign","err","url","resp","httpResponse","data","XML","Parser","parse","body","toString","Errors","error","Error","code","Code","message","Message","statusCode","requestId","RequestID"],"sources":["/Users/lazarbogdan/test/medicacasa-frontend/node_modules/aws-sdk/lib/services/ec2.js"],"sourcesContent":["var AWS = require('../core');\n\nAWS.util.update(AWS.EC2.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.removeListener('extractError', AWS.EventListeners.Query.EXTRACT_ERROR);\n    request.addListener('extractError', this.extractError);\n\n    if (request.operation === 'copySnapshot') {\n      request.onAsync('validate', this.buildCopySnapshotPresignedUrl);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  buildCopySnapshotPresignedUrl: function buildCopySnapshotPresignedUrl(req, done) {\n    if (req.params.PresignedUrl || req._subRequest) {\n      return done();\n    }\n\n    req.params = AWS.util.copy(req.params);\n    req.params.DestinationRegion = req.service.config.region;\n\n    var config = AWS.util.copy(req.service.config);\n    delete config.endpoint;\n    config.region = req.params.SourceRegion;\n    var svc = new req.service.constructor(config);\n    var newReq = svc[req.operation](req.params);\n    newReq._subRequest = true;\n    newReq.presign(function(err, url) {\n      if (err) done(err);\n      else {\n        req.params.PresignedUrl = url;\n        done();\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    // EC2 nests the error code and message deeper than other AWS Query services.\n    var httpResponse = resp.httpResponse;\n    var data = new AWS.XML.Parser().parse(httpResponse.body.toString() || '');\n    if (data.Errors) {\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Errors.Error.Code,\n        message: data.Errors.Error.Message\n      });\n    } else {\n      resp.error = AWS.util.error(new Error(), {\n        code: httpResponse.statusCode,\n        message: null\n      });\n    }\n    resp.error.requestId = data.RequestID || null;\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}