{"ast":null,"code":"import _slicedToArray from\"/Users/lazarbogdan/test/medicacasa-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import AWS from'aws-sdk';var S3_BUCKET='mydoctorbucket/profilePhotos';var REGION='eu-central-1';AWS.config.update({accessKeyId:'AKIAVB5RGJ3ADZMXXRXI',secretAccessKey:'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'});var myBucket=new AWS.S3({params:{Bucket:S3_BUCKET},region:REGION});var UploadImageToS3WithNativeSdk=function UploadImageToS3WithNativeSdk(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),progress=_useState2[0],setProgress=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var handleFileInput=function handleFileInput(e){setSelectedFile(e.target.files[0]);};var uploadFile=function uploadFile(file){console.log(file.name);var params={ACL:'public-read',Body:file,Bucket:S3_BUCKET,Key:file.name};myBucket.putObject(params).on('httpUploadProgress',function(evt){setProgress(Math.round(evt.loaded/evt.total*100));}).send(function(err){if(err)console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Native SDK File Upload Progress is \",progress,\"%\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:handleFileInput}),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return uploadFile(selectedFile);}},\" Upload to S3\"));};export default UploadImageToS3WithNativeSdk;","map":{"version":3,"names":["React","useState","AWS","S3_BUCKET","REGION","config","update","accessKeyId","secretAccessKey","myBucket","S3","params","Bucket","region","UploadImageToS3WithNativeSdk","progress","setProgress","selectedFile","setSelectedFile","handleFileInput","e","target","files","uploadFile","file","console","log","name","ACL","Body","Key","putObject","on","evt","Math","round","loaded","total","send","err"],"sources":["/Users/lazarbogdan/test/medicacasa-frontend/src/services/UploadImageToS3WithNativeSdk.js"],"sourcesContent":["import React ,{useState} from 'react';\nimport AWS from 'aws-sdk'\n\nconst S3_BUCKET ='mydoctorbucket/profilePhotos';\nconst REGION ='eu-central-1';\n\n\nAWS.config.update({\n    accessKeyId: 'AKIAVB5RGJ3ADZMXXRXI',\n    secretAccessKey: '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'\n})\n\nconst myBucket = new AWS.S3({\n    params: { Bucket: S3_BUCKET},\n    region: REGION,\n})\n\nconst UploadImageToS3WithNativeSdk = () => {\n\n    const [progress , setProgress] = useState(0);\n    const [selectedFile, setSelectedFile] = useState(null);\n\n    const handleFileInput = (e) => {\n        setSelectedFile(e.target.files[0]);\n    }\n\n    const uploadFile = (file) => {\n\n        console.log(file.name);\n        const params = {\n            ACL: 'public-read',\n            Body: file,\n            Bucket: S3_BUCKET,\n            Key: file.name\n        };\n\n        myBucket.putObject(params)\n            .on('httpUploadProgress', (evt) => {\n                setProgress(Math.round((evt.loaded / evt.total) * 100))\n            })\n            .send((err) => {\n                if (err) console.log(err)\n            })\n    }\n\n\n    return <div>\n        <div>Native SDK File Upload Progress is {progress}%</div>\n        <input type=\"file\" onChange={handleFileInput}/>\n        <button onClick={() => uploadFile(selectedFile)}> Upload to S3</button>\n    </div>\n}\n\nexport default UploadImageToS3WithNativeSdk;"],"mappings":"kKAAA,MAAOA,MAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,IAAP,KAAgB,SAAhB,CAEA,GAAMC,UAAS,CAAE,8BAAjB,CACA,GAAMC,OAAM,CAAE,cAAd,CAGAF,GAAG,CAACG,MAAJ,CAAWC,MAAX,CAAkB,CACdC,WAAW,CAAE,sBADC,CAEdC,eAAe,CAAE,0CAFH,CAAlB,EAKA,GAAMC,SAAQ,CAAG,GAAIP,IAAG,CAACQ,EAAR,CAAW,CACxBC,MAAM,CAAE,CAAEC,MAAM,CAAET,SAAV,CADgB,CAExBU,MAAM,CAAET,MAFgB,CAAX,CAAjB,CAKA,GAAMU,6BAA4B,CAAG,QAA/BA,6BAA+B,EAAM,CAEvC,cAAiCb,QAAQ,CAAC,CAAD,CAAzC,wCAAOc,QAAP,eAAkBC,WAAlB,eACA,eAAwCf,QAAQ,CAAC,IAAD,CAAhD,yCAAOgB,YAAP,eAAqBC,eAArB,eAEA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,CAAD,CAAO,CAC3BF,eAAe,CAACE,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAf,CACH,CAFD,CAIA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,IAAD,CAAU,CAEzBC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAjB,EACA,GAAMhB,OAAM,CAAG,CACXiB,GAAG,CAAE,aADM,CAEXC,IAAI,CAAEL,IAFK,CAGXZ,MAAM,CAAET,SAHG,CAIX2B,GAAG,CAAEN,IAAI,CAACG,IAJC,CAAf,CAOAlB,QAAQ,CAACsB,SAAT,CAAmBpB,MAAnB,EACKqB,EADL,CACQ,oBADR,CAC8B,SAACC,GAAD,CAAS,CAC/BjB,WAAW,CAACkB,IAAI,CAACC,KAAL,CAAYF,GAAG,CAACG,MAAJ,CAAaH,GAAG,CAACI,KAAlB,CAA2B,GAAtC,CAAD,CAAX,CACH,CAHL,EAIKC,IAJL,CAIU,SAACC,GAAD,CAAS,CACX,GAAIA,GAAJ,CAASd,OAAO,CAACC,GAAR,CAAYa,GAAZ,EACZ,CANL,EAOH,CAjBD,CAoBA,mBAAO,4CACH,qEAAyCxB,QAAzC,KADG,cAEH,6BAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAEI,eAA7B,EAFG,cAGH,8BAAQ,OAAO,CAAE,yBAAMI,WAAU,CAACN,YAAD,CAAhB,EAAjB,kBAHG,CAAP,CAKH,CAlCD,CAoCA,cAAeH,6BAAf"},"metadata":{},"sourceType":"module"}