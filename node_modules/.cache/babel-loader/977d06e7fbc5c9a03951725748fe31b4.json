{"ast":null,"code":"var util = require('../core').util;\n\nvar toBuffer = util.buffer.toBuffer; // All prelude components are unsigned, 32-bit integers\n\nvar PRELUDE_MEMBER_LENGTH = 4; // The prelude consists of two components\n\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2; // Checksums are always CRC32 hashes.\n\nvar CHECKSUM_LENGTH = 4; // Messages must include a full prelude, a prelude checksum, and a message checksum\n\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n/**\n * @api private\n *\n * @param {Buffer} message\n */\n\nfunction splitMessage(message) {\n  if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n  if (message.length < MINIMUM_MESSAGE_LENGTH) {\n    throw new Error('Provided message too short to accommodate event stream message overhead');\n  }\n\n  if (message.length !== message.readUInt32BE(0)) {\n    throw new Error('Reported message length does not match received message length');\n  }\n\n  var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n  if (expectedPreludeChecksum !== util.crypto.crc32(message.slice(0, PRELUDE_LENGTH))) {\n    throw new Error('The prelude checksum specified in the message (' + expectedPreludeChecksum + ') does not match the calculated CRC32 checksum.');\n  }\n\n  var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n  if (expectedMessageChecksum !== util.crypto.crc32(message.slice(0, message.length - CHECKSUM_LENGTH))) {\n    throw new Error('The message checksum did not match the expected value of ' + expectedMessageChecksum);\n  }\n\n  var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n  var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n  return {\n    headers: message.slice(headersStart, headersEnd),\n    body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH)\n  };\n}\n/**\n * @api private\n */\n\n\nmodule.exports = {\n  splitMessage: splitMessage\n};","map":{"version":3,"names":["util","require","toBuffer","buffer","PRELUDE_MEMBER_LENGTH","PRELUDE_LENGTH","CHECKSUM_LENGTH","MINIMUM_MESSAGE_LENGTH","splitMessage","message","Buffer","isBuffer","length","Error","readUInt32BE","expectedPreludeChecksum","crypto","crc32","slice","expectedMessageChecksum","headersStart","headersEnd","headers","body","module","exports"],"sources":["/Users/lazarbogdan/test/medicacasa-frontend/medicacasa-frontend/node_modules/aws-sdk/lib/event-stream/split-message.js"],"sourcesContent":["var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n// All prelude components are unsigned, 32-bit integers\nvar PRELUDE_MEMBER_LENGTH = 4;\n// The prelude consists of two components\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n// Checksums are always CRC32 hashes.\nvar CHECKSUM_LENGTH = 4;\n// Messages must include a full prelude, a prelude checksum, and a message checksum\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n\n/**\n * @api private\n *\n * @param {Buffer} message\n */\nfunction splitMessage(message) {\n    if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n    if (message.length < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n    }\n\n    if (message.length !== message.readUInt32BE(0)) {\n        throw new Error('Reported message length does not match received message length');\n    }\n\n    var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n    if (\n        expectedPreludeChecksum !== util.crypto.crc32(\n            message.slice(0, PRELUDE_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The prelude checksum specified in the message (' +\n            expectedPreludeChecksum +\n            ') does not match the calculated CRC32 checksum.'\n        );\n    }\n\n    var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n    if (\n        expectedMessageChecksum !== util.crypto.crc32(\n            message.slice(0, message.length - CHECKSUM_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The message checksum did not match the expected value of ' +\n                expectedMessageChecksum\n        );\n    }\n\n    var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n    var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n\n    return {\n        headers: message.slice(headersStart, headersEnd),\n        body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH),\n    };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    splitMessage: splitMessage\n};\n"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,IAA9B;;AACA,IAAIE,QAAQ,GAAGF,IAAI,CAACG,MAAL,CAAYD,QAA3B,C,CAEA;;AACA,IAAIE,qBAAqB,GAAG,CAA5B,C,CACA;;AACA,IAAIC,cAAc,GAAGD,qBAAqB,GAAG,CAA7C,C,CACA;;AACA,IAAIE,eAAe,GAAG,CAAtB,C,CACA;;AACA,IAAIC,sBAAsB,GAAGF,cAAc,GAAGC,eAAe,GAAG,CAAhE;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASE,YAAT,CAAsBC,OAAtB,EAA+B;EAC3B,IAAI,CAACT,IAAI,CAACU,MAAL,CAAYC,QAAZ,CAAqBF,OAArB,CAAL,EAAoCA,OAAO,GAAGP,QAAQ,CAACO,OAAD,CAAlB;;EAEpC,IAAIA,OAAO,CAACG,MAAR,GAAiBL,sBAArB,EAA6C;IACzC,MAAM,IAAIM,KAAJ,CAAU,yEAAV,CAAN;EACH;;EAED,IAAIJ,OAAO,CAACG,MAAR,KAAmBH,OAAO,CAACK,YAAR,CAAqB,CAArB,CAAvB,EAAgD;IAC5C,MAAM,IAAID,KAAJ,CAAU,gEAAV,CAAN;EACH;;EAED,IAAIE,uBAAuB,GAAGN,OAAO,CAACK,YAAR,CAAqBT,cAArB,CAA9B;;EAEA,IACIU,uBAAuB,KAAKf,IAAI,CAACgB,MAAL,CAAYC,KAAZ,CACxBR,OAAO,CAACS,KAAR,CAAc,CAAd,EAAiBb,cAAjB,CADwB,CADhC,EAIE;IACE,MAAM,IAAIQ,KAAJ,CACF,oDACAE,uBADA,GAEA,iDAHE,CAAN;EAKH;;EAED,IAAII,uBAAuB,GAAGV,OAAO,CAACK,YAAR,CAAqBL,OAAO,CAACG,MAAR,GAAiBN,eAAtC,CAA9B;;EAEA,IACIa,uBAAuB,KAAKnB,IAAI,CAACgB,MAAL,CAAYC,KAAZ,CACxBR,OAAO,CAACS,KAAR,CAAc,CAAd,EAAiBT,OAAO,CAACG,MAAR,GAAiBN,eAAlC,CADwB,CADhC,EAIE;IACE,MAAM,IAAIO,KAAJ,CACF,8DACIM,uBAFF,CAAN;EAIH;;EAED,IAAIC,YAAY,GAAGf,cAAc,GAAGC,eAApC;EACA,IAAIe,UAAU,GAAGD,YAAY,GAAGX,OAAO,CAACK,YAAR,CAAqBV,qBAArB,CAAhC;EAEA,OAAO;IACHkB,OAAO,EAAEb,OAAO,CAACS,KAAR,CAAcE,YAAd,EAA4BC,UAA5B,CADN;IAEHE,IAAI,EAAEd,OAAO,CAACS,KAAR,CAAcG,UAAd,EAA0BZ,OAAO,CAACG,MAAR,GAAiBN,eAA3C;EAFH,CAAP;AAIH;AAED;AACA;AACA;;;AACAkB,MAAM,CAACC,OAAP,GAAiB;EACbjB,YAAY,EAAEA;AADD,CAAjB"},"metadata":{},"sourceType":"script"}