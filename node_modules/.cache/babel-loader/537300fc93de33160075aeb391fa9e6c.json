{"ast":null,"code":"var AWS = require('../core');\n\nvar util = require('../util');\n\nvar Rest = require('./rest');\n\nfunction populateBody(req) {\n  var input = req.service.api.operations[req.operation].input;\n  var builder = new AWS.XML.Builder();\n  var params = req.params;\n  var payload = input.payload;\n\n  if (payload) {\n    var payloadMember = input.members[payload];\n    params = params[payload];\n    if (params === undefined) return;\n\n    if (payloadMember.type === 'structure') {\n      var rootElement = payloadMember.name;\n      req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n    } else {\n      // non-xml payload\n      req.httpRequest.body = params;\n    }\n  } else {\n    req.httpRequest.body = builder.toXML(params, input, input.name || input.shape || util.string.upperFirst(req.operation) + 'Request');\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req); // never send body payload on GET/HEAD\n\n  if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Rest.extractError(resp);\n  var data;\n\n  try {\n    data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n  } catch (e) {\n    data = {\n      Code: resp.httpResponse.statusCode,\n      Message: resp.httpResponse.statusMessage\n    };\n  }\n\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n  var parser;\n  var req = resp.request;\n  var body = resp.httpResponse.body;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n  var hasEventOutput = operation.hasEventOutput;\n  var payload = output.payload;\n\n  if (payload) {\n    var payloadMember = output.members[payload];\n\n    if (payloadMember.isEventStream) {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = util.createEventStream(AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body, parser, payloadMember);\n    } else if (payloadMember.type === 'structure') {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = parser.parse(body.toString(), payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[payload] = body;\n    } else {\n      resp.data[payload] = payloadMember.toType(body);\n    }\n  } else if (body.length > 0) {\n    parser = new AWS.XML.Parser();\n    var data = parser.parse(body.toString(), output);\n    util.update(resp.data, data);\n  }\n}\n/**\n * @api private\n */\n\n\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};","map":{"version":3,"names":["AWS","require","util","Rest","populateBody","req","input","service","api","operations","operation","builder","XML","Builder","params","payload","payloadMember","members","undefined","type","rootElement","name","httpRequest","body","toXML","shape","string","upperFirst","buildRequest","indexOf","method","extractError","resp","data","Parser","parse","httpResponse","toString","e","Code","statusCode","Message","statusMessage","Errors","Error","error","code","message","extractData","parser","request","output","hasEventOutput","isEventStream","createEventStream","HttpClient","streamsApiVersion","stream","isStreaming","toType","length","update","module","exports"],"sources":["/Users/lazarbogdan/test/medicacasa-frontend/node_modules/aws-sdk/lib/protocol/rest_xml.js"],"sourcesContent":["var AWS = require('../core');\nvar util = require('../util');\nvar Rest = require('./rest');\n\nfunction populateBody(req) {\n  var input = req.service.api.operations[req.operation].input;\n  var builder = new AWS.XML.Builder();\n  var params = req.params;\n\n  var payload = input.payload;\n  if (payload) {\n    var payloadMember = input.members[payload];\n    params = params[payload];\n    if (params === undefined) return;\n\n    if (payloadMember.type === 'structure') {\n      var rootElement = payloadMember.name;\n      req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n    } else { // non-xml payload\n      req.httpRequest.body = params;\n    }\n  } else {\n    req.httpRequest.body = builder.toXML(params, input, input.name ||\n      input.shape || util.string.upperFirst(req.operation) + 'Request');\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on GET/HEAD\n  if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Rest.extractError(resp);\n\n  var data;\n  try {\n    data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n  } catch (e) {\n    data = {\n      Code: resp.httpResponse.statusCode,\n      Message: resp.httpResponse.statusMessage\n    };\n  }\n\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var parser;\n  var req = resp.request;\n  var body = resp.httpResponse.body;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  var hasEventOutput = operation.hasEventOutput;\n\n  var payload = output.payload;\n  if (payload) {\n    var payloadMember = output.members[payload];\n    if (payloadMember.isEventStream) {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure') {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = parser.parse(body.toString(), payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[payload] = body;\n    } else {\n      resp.data[payload] = payloadMember.toType(body);\n    }\n  } else if (body.length > 0) {\n    parser = new AWS.XML.Parser();\n    var data = parser.parse(body.toString(), output);\n    util.update(resp.data, data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}