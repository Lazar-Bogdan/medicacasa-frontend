{"ast":null,"code":"var AWS = require('../core');\n\nvar inherit = AWS.util.inherit;\n/**\n * @api private\n */\n\nAWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n  /**\n   * When building the stringToSign, these sub resource params should be\n   * part of the canonical resource string with their NON-decoded values\n   */\n  subResources: {\n    'acl': 1,\n    'accelerate': 1,\n    'analytics': 1,\n    'cors': 1,\n    'lifecycle': 1,\n    'delete': 1,\n    'inventory': 1,\n    'location': 1,\n    'logging': 1,\n    'metrics': 1,\n    'notification': 1,\n    'partNumber': 1,\n    'policy': 1,\n    'requestPayment': 1,\n    'replication': 1,\n    'restore': 1,\n    'tagging': 1,\n    'torrent': 1,\n    'uploadId': 1,\n    'uploads': 1,\n    'versionId': 1,\n    'versioning': 1,\n    'versions': 1,\n    'website': 1\n  },\n  // when building the stringToSign, these querystring params should be\n  // part of the canonical resource string with their NON-encoded values\n  responseHeaders: {\n    'response-content-type': 1,\n    'response-content-language': 1,\n    'response-expires': 1,\n    'response-cache-control': 1,\n    'response-content-disposition': 1,\n    'response-content-encoding': 1\n  },\n  addAuthorization: function addAuthorization(credentials, date) {\n    if (!this.request.headers['presigned-expires']) {\n      this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n    }\n\n    if (credentials.sessionToken) {\n      // presigned URLs require this header to be lowercased\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n    var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n    this.request.headers['Authorization'] = auth;\n  },\n  stringToSign: function stringToSign() {\n    var r = this.request;\n    var parts = [];\n    parts.push(r.method);\n    parts.push(r.headers['Content-MD5'] || '');\n    parts.push(r.headers['Content-Type'] || ''); // This is the \"Date\" header, but we use X-Amz-Date.\n    // The S3 signing mechanism requires us to pass an empty\n    // string for this Date header regardless.\n\n    parts.push(r.headers['presigned-expires'] || '');\n    var headers = this.canonicalizedAmzHeaders();\n    if (headers) parts.push(headers);\n    parts.push(this.canonicalizedResource());\n    return parts.join('\\n');\n  },\n  canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n    var amzHeaders = [];\n    AWS.util.each(this.request.headers, function (name) {\n      if (name.match(/^x-amz-/i)) amzHeaders.push(name);\n    });\n    amzHeaders.sort(function (a, b) {\n      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n    });\n    var parts = [];\n    AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n      parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n    });\n    return parts.join('\\n');\n  },\n  canonicalizedResource: function canonicalizedResource() {\n    var r = this.request;\n    var parts = r.path.split('?');\n    var path = parts[0];\n    var querystring = parts[1];\n    var resource = '';\n    if (r.virtualHostedBucket) resource += '/' + r.virtualHostedBucket;\n    resource += path;\n\n    if (querystring) {\n      // collect a list of sub resources and query params that need to be signed\n      var resources = [];\n      AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n        var name = param.split('=')[0];\n        var value = param.split('=')[1];\n\n        if (this.subResources[name] || this.responseHeaders[name]) {\n          var subresource = {\n            name: name\n          };\n\n          if (value !== undefined) {\n            if (this.subResources[name]) {\n              subresource.value = value;\n            } else {\n              subresource.value = decodeURIComponent(value);\n            }\n          }\n\n          resources.push(subresource);\n        }\n      });\n      resources.sort(function (a, b) {\n        return a.name < b.name ? -1 : 1;\n      });\n\n      if (resources.length) {\n        querystring = [];\n        AWS.util.arrayEach(resources, function (res) {\n          if (res.value === undefined) {\n            querystring.push(res.name);\n          } else {\n            querystring.push(res.name + '=' + res.value);\n          }\n        });\n        resource += '?' + querystring.join('&');\n      }\n    }\n\n    return resource;\n  },\n  sign: function sign(secret, string) {\n    return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n  }\n});\n/**\n * @api private\n */\n\nmodule.exports = AWS.Signers.S3;","map":{"version":3,"names":["AWS","require","inherit","util","Signers","S3","RequestSigner","subResources","responseHeaders","addAuthorization","credentials","date","request","headers","rfc822","sessionToken","signature","sign","secretAccessKey","stringToSign","auth","accessKeyId","r","parts","push","method","canonicalizedAmzHeaders","canonicalizedResource","join","amzHeaders","each","name","match","sort","a","b","toLowerCase","arrayEach","call","String","path","split","querystring","resource","virtualHostedBucket","resources","param","value","subresource","undefined","decodeURIComponent","length","res","secret","string","crypto","hmac","module","exports"],"sources":["/Users/lazarbogdan/test/medicacasa-frontend/medicacasa-frontend/node_modules/aws-sdk/lib/signers/s3.js"],"sourcesContent":["var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n  /**\n   * When building the stringToSign, these sub resource params should be\n   * part of the canonical resource string with their NON-decoded values\n   */\n  subResources: {\n    'acl': 1,\n    'accelerate': 1,\n    'analytics': 1,\n    'cors': 1,\n    'lifecycle': 1,\n    'delete': 1,\n    'inventory': 1,\n    'location': 1,\n    'logging': 1,\n    'metrics': 1,\n    'notification': 1,\n    'partNumber': 1,\n    'policy': 1,\n    'requestPayment': 1,\n    'replication': 1,\n    'restore': 1,\n    'tagging': 1,\n    'torrent': 1,\n    'uploadId': 1,\n    'uploads': 1,\n    'versionId': 1,\n    'versioning': 1,\n    'versions': 1,\n    'website': 1\n  },\n\n  // when building the stringToSign, these querystring params should be\n  // part of the canonical resource string with their NON-encoded values\n  responseHeaders: {\n    'response-content-type': 1,\n    'response-content-language': 1,\n    'response-expires': 1,\n    'response-cache-control': 1,\n    'response-content-disposition': 1,\n    'response-content-encoding': 1\n  },\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    if (!this.request.headers['presigned-expires']) {\n      this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n    }\n\n    if (credentials.sessionToken) {\n      // presigned URLs require this header to be lowercased\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n    var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n\n    this.request.headers['Authorization'] = auth;\n  },\n\n  stringToSign: function stringToSign() {\n    var r = this.request;\n\n    var parts = [];\n    parts.push(r.method);\n    parts.push(r.headers['Content-MD5'] || '');\n    parts.push(r.headers['Content-Type'] || '');\n\n    // This is the \"Date\" header, but we use X-Amz-Date.\n    // The S3 signing mechanism requires us to pass an empty\n    // string for this Date header regardless.\n    parts.push(r.headers['presigned-expires'] || '');\n\n    var headers = this.canonicalizedAmzHeaders();\n    if (headers) parts.push(headers);\n    parts.push(this.canonicalizedResource());\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n\n    var amzHeaders = [];\n\n    AWS.util.each(this.request.headers, function (name) {\n      if (name.match(/^x-amz-/i))\n        amzHeaders.push(name);\n    });\n\n    amzHeaders.sort(function (a, b) {\n      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n    });\n\n    var parts = [];\n    AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n      parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n    });\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedResource: function canonicalizedResource() {\n\n    var r = this.request;\n\n    var parts = r.path.split('?');\n    var path = parts[0];\n    var querystring = parts[1];\n\n    var resource = '';\n\n    if (r.virtualHostedBucket)\n      resource += '/' + r.virtualHostedBucket;\n\n    resource += path;\n\n    if (querystring) {\n\n      // collect a list of sub resources and query params that need to be signed\n      var resources = [];\n\n      AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n        var name = param.split('=')[0];\n        var value = param.split('=')[1];\n        if (this.subResources[name] || this.responseHeaders[name]) {\n          var subresource = { name: name };\n          if (value !== undefined) {\n            if (this.subResources[name]) {\n              subresource.value = value;\n            } else {\n              subresource.value = decodeURIComponent(value);\n            }\n          }\n          resources.push(subresource);\n        }\n      });\n\n      resources.sort(function (a, b) { return a.name < b.name ? -1 : 1; });\n\n      if (resources.length) {\n\n        querystring = [];\n        AWS.util.arrayEach(resources, function (res) {\n          if (res.value === undefined) {\n            querystring.push(res.name);\n          } else {\n            querystring.push(res.name + '=' + res.value);\n          }\n        });\n\n        resource += '?' + querystring.join('&');\n      }\n\n    }\n\n    return resource;\n\n  },\n\n  sign: function sign(secret, string) {\n    return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.S3;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}